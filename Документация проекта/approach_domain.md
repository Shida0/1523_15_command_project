# üåç **–ú–û–î–£–õ–¨ –°–ë–õ–ò–ñ–ï–ù–ò–ô**

## üìã **–ù–ê–ó–ù–ê–ß–ï–ù–ò–ï –ò –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–ò**

–î–æ–º–µ–Ω —Å–±–ª–∏–∂–µ–Ω–∏–π (`domains/approach`) –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–±–ª–∏–∂–µ–Ω–∏—è—Ö –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å –ó–µ–º–ª–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ NASA CAD API
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–±–ª–∏–∂–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –¥–æ–º–µ–Ω–æ–º –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤

## üß± **–ú–û–î–ï–õ–¨ CLOSEAPPROACHMODEL**

### **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/approach/models/close_approach.py`

### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ú–æ–¥–µ–ª—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å –ó–µ–º–ª–µ–π, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–±–ª–∏—Ü–µ `close_approach_models`.

### **–ê—Ç—Ä–∏–±—É—Ç—ã –º–æ–¥–µ–ª–∏:**

| –ê—Ç—Ä–∏–±—É—Ç | –¢–∏–ø | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|-----|------------|
| `id` | `int` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç) |
| `created_at` | `datetime` | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ |
| `updated_at` | `datetime` | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| `asteroid_id` | `int` | –°—Å—ã–ª–∫–∞ –Ω–∞ –∞—Å—Ç–µ—Ä–æ–∏–¥ |
| `approach_time` | `datetime` | –¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–±–ª–∏–∂–µ–Ω–∏—è |
| `distance_au` | `float` | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö |
| `distance_km` | `float` | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö (—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –ø–æ–ª–µ) |
| `velocity_km_s` | `float` | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –∫–º/—Å |
| `asteroid_designation` | `str` | –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ NASA –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ |
| `asteroid_name` | `Optional[str]` | –ü–æ–ª–Ω–æ–µ –∏–º—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –∏–∑ CAD API |
| `data_source` | `str` | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (NASA CAD API –∏–ª–∏ –¥—Ä—É–≥–æ–π) |
| `calculation_batch_id` | `Optional[str]` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–∞—Ä—Ç–∏–∏ —Ä–∞—Å—á–µ—Ç–∞ (–¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è) |

### **–û—Ç–Ω–æ—à–µ–Ω–∏—è:**
- `asteroid`: –°–≤—è–∑—å –º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É —Å `AsteroidModel`

### **–ú–µ—Ç–æ–¥—ã –º–æ–¥–µ–ª–∏:**
- `__init__(**kwargs)` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –º–æ–¥–µ–ª–∏ —Å–±–ª–∏–∂–µ–Ω–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö
- `__repr__()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞

## üìê **–°–•–ï–ú–´ PYDANTIC**

### **ApproachBase**
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/approach/schemas/approach_schema.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ —Å–±–ª–∏–∂–µ–Ω–∏—è —Å –æ–±—â–∏–º–∏ –ø–æ–ª—è–º–∏.

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `id` (int): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `created_at` (datetime): –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` (datetime): –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `asteroid_id` (int): ID –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- `approach_time` (datetime): –í—Ä–µ–º—è —Å–±–ª–∏–∂–µ–Ω–∏—è
- `distance_au` (float): –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –∞.–µ.
- `distance_km` (float): –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–º
- `velocity_km_s` (float): –°–∫–æ—Ä–æ—Å—Ç—å –≤ –∫–º/—Å
- `asteroid_designation` (str): –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- `asteroid_name` (Optional[str]): –ò–º—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- `data_source` (str): –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- `calculation_batch_id` (Optional[str]): ID –ø–∞—Ä—Ç–∏–∏ —Ä–∞—Å—á–µ—Ç–∞

### **ApproachCreate**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ö–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–±–ª–∏–∂–µ–Ω–∏—è.

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `asteroid_id` (int): ID –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- `approach_time` (datetime): –í—Ä–µ–º—è —Å–±–ª–∏–∂–µ–Ω–∏—è
- `distance_au` (float): –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –∞.–µ.
- `velocity_km_s` (float): –°–∫–æ—Ä–æ—Å—Ç—å –≤ –∫–º/—Å
- `asteroid_designation` (str): –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- `asteroid_name` (Optional[str]): –ò–º—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- `data_source` (str): –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º "NASA CAD API"
- `calculation_batch_id` (Optional[str]): ID –ø–∞—Ä—Ç–∏–∏ —Ä–∞—Å—á–µ—Ç–∞

### **ApproachResponse**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ö–µ–º–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ API —Å–æ —Å–±–ª–∏–∂–µ–Ω–∏–µ–º.

**–ê—Ç—Ä–∏–±—É—Ç—ã:** –í—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ `ApproachBase`

## üè™ **–†–ï–ü–û–ó–ò–¢–û–†–ò–ô APPROACHREPOSITORY**

### **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/approach/repositories/approach_repository.py`

### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å–±–ª–∏–∂–µ–Ω–∏—è–º–∏ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤, –Ω–∞—Å–ª–µ–¥—É–µ—Ç `BaseRepository` –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `CloseApproachModel`.

### **–ú–µ—Ç–æ–¥—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**

#### **`get_by_asteroid(asteroid_id: int, skip: int = 0, limit: int = 100) -> List[CloseApproachModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Å–±–ª–∏–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `asteroid_id`, `skip`, `limit`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[CloseApproachModel]` - —Å–ø–∏—Å–æ–∫ —Å–±–ª–∏–∂–µ–Ω–∏–π

#### **`get_by_asteroid_designation(designation: str, skip: int = 0, limit: int = 100) -> List[CloseApproachModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Å–±–ª–∏–∂–µ–Ω–∏—è –¥–ª—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `designation`, `skip`, `limit`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[CloseApproachModel]` - —Å–ø–∏—Å–æ–∫ —Å–±–ª–∏–∂–µ–Ω–∏–π

#### **`get_approaches_in_period(start_date: datetime, end_date: datetime, max_distance: Optional[float] = None, skip: int = 0, limit: int = 100) -> List[CloseApproachModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç —Å–±–ª–∏–∂–µ–Ω–∏—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `start_date`, `end_date`, `max_distance`, `skip`, `limit`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[CloseApproachModel]` - —Å–ø–∏—Å–æ–∫ —Å–±–ª–∏–∂–µ–Ω–∏–π

#### **`get_upcoming_approaches(limit: int = 10) -> List[CloseApproachModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç –±–ª–∏–∂–∞–π—à–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–ª–∏–∂–µ–Ω–∏—è
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[CloseApproachModel]` - —Å–ø–∏—Å–æ–∫ —Å–±–ª–∏–∂–µ–Ω–∏–π

#### **`get_closest_approaches_by_distance(limit: int = 10) -> List[CloseApproachModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç —Å–∞–º—ã–µ –±–ª–∏–∑–∫–∏–µ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é —Å–±–ª–∏–∂–µ–Ω–∏—è
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[CloseApproachModel]` - —Å–ø–∏—Å–æ–∫ —Å–±–ª–∏–∂–µ–Ω–∏–π

#### **`get_fastest_approaches(limit: int = 10) -> List[CloseApproachModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç —Å–±–ª–∏–∂–µ–Ω–∏—è —Å –Ω–∞–∏–±–æ–ª—å—à–µ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[CloseApproachModel]` - —Å–ø–∏—Å–æ–∫ —Å–±–ª–∏–∂–µ–Ω–∏–π

#### **`bulk_create_approaches(approaches_data: List[Dict[str, Any]], calculation_batch_id: str) -> int`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–±–ª–∏–∂–µ–Ω–∏–π —Å –∫–æ–º–º–∏—Ç–æ–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `approaches_data`, `calculation_batch_id`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `int` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π

#### **`delete_old_approaches(cutoff_date: datetime) -> int`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å–±–ª–∏–∂–µ–Ω–∏—è (–∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø—Ä–æ–∏–∑–æ—à–ª–∏) —Å –∫–æ–º–º–∏—Ç–æ–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `cutoff_date` - –¥–∞—Ç–∞ –æ—Ç—Å–µ—á–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `int` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π

#### **`get_statistics() -> Dict[str, Any]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–±–ª–∏–∂–µ–Ω–∏—è–º
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Dict[str, Any]` - —Å–ª–æ–≤–∞—Ä—å —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

## üõ†Ô∏è **–°–ï–†–í–ò–° APPROACHSERVICE**

### **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/approach/services/approach_service.py`

### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–±–ª–∏–∂–µ–Ω–∏—è–º–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–±–ª–∏–∂–µ–Ω–∏—è–º–∏ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å –ó–µ–º–ª–µ–π.

### **–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `session_factory`: –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π SQLAlchemy

### **–ú–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞:**

#### **`get_upcoming(limit: int = 10) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–∏—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å –ó–µ–º–ª–µ–π
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ –±–ª–∏–∂–∞–π—à–∏—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π
- **–ü—Ä–∏–º–µ—Ä:**
```python
upcoming = await service.get_upcoming(5)
print(f"–ë–ª–∏–∂–∞–π—à–∏–µ 5 —Å–±–ª–∏–∂–µ–Ω–∏–π: {len(upcoming)}")
```

#### **`get_closest(limit: int = 10) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∞–º—ã—Ö –±–ª–∏–∑–∫–∏—Ö –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é —Å–±–ª–∏–∂–µ–Ω–∏–π
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ —Å–±–ª–∏–∂–µ–Ω–∏–π, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é

#### **`get_fastest(limit: int = 10) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–±–ª–∏–∂–µ–Ω–∏–π —Å –Ω–∞–∏–±–æ–ª—å—à–µ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ —Å–±–ª–∏–∂–µ–Ω–∏–π, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏

#### **`get_statistics() -> Dict[str, Any]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–±–ª–∏–∂–µ–Ω–∏—è–º –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å –ó–µ–º–ª–µ–π
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Dict[str, Any]` - —Å–ª–æ–≤–∞—Ä—å —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ —Å–±–ª–∏–∂–µ–Ω–∏—è—Ö

#### **`get_by_asteroid_id(asteroid_id: int) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π –¥–ª—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –ø–æ –µ–≥–æ ID
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `asteroid_id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞

#### **`get_by_asteroid_designation(designation: str) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π –¥–ª—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –ø–æ –µ–≥–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—é NASA
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `designation` - –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –≤ —Å–∏—Å—Ç–µ–º–µ NASA
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π –¥–ª—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ–º

#### **`_model_to_dict(model_instance) -> Dict[str, Any]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –º–æ–¥–µ–ª–∏ –≤ —Å–ª–æ–≤–∞—Ä—å

## üß™ **–ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø**

### **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**
```python
from shared.transaction.uow import UnitOfWork
from shared.database.engine import AsyncSessionLocal
from datetime import datetime, timedelta

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ —Ä–∞–º–∫–∞—Ö Unit of Work
async with UnitOfWork(AsyncSessionLocal) as uow:
    # –ü–æ–ª—É—á–∏—Ç—å —Å–±–ª–∏–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
    approaches = await uow.approach_repo.get_by_asteroid(123)
    
    # –ù–∞–π—Ç–∏ –±–ª–∏–∂–∞–π—à–∏–µ —Å–±–ª–∏–∂–µ–Ω–∏—è
    upcoming = await uow.approach_repo.get_upcoming_approaches(10)
    
    # –ù–∞–π—Ç–∏ —Å–±–ª–∏–∂–µ–Ω–∏—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ
    start_date = datetime.now()
    end_date = start_date + timedelta(days=365)
    period_approaches = await uow.approach_repo.get_approaches_in_period(
        start_date, end_date, max_distance=0.05
    )
    
    # –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–±–ª–∏–∂–µ–Ω–∏—è–º
    stats = await uow.approach_repo.get_statistics()
    
    print(f"–í—Å–µ–≥–æ —Å–±–ª–∏–∂–µ–Ω–∏–π: {stats['total_approaches']}")
    print(f"–ë–ª–∏–∂–∞–π—à–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ: {stats['closest_distance_au']} –∞.–µ.")
```

### **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞:**
```python
from domains.approach.services.approach_service import ApproachService
from shared.database.engine import AsyncSessionLocal

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
service = ApproachService(AsyncSessionLocal)

# –ü–æ–ª—É—á–∏—Ç—å –±–ª–∏–∂–∞–π—à–∏–µ —Å–±–ª–∏–∂–µ–Ω–∏—è
upcoming = await service.get_upcoming(10)
print(f"–ë–ª–∏–∂–∞–π—à–∏–µ —Å–±–ª–∏–∂–µ–Ω–∏—è: {len(upcoming)}")

# –ü–æ–ª—É—á–∏—Ç—å —Å–∞–º—ã–µ –±–ª–∏–∑–∫–∏–µ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
closest = await service.get_closest(5)
print(f"–°–∞–º—ã–µ –±–ª–∏–∑–∫–∏–µ —Å–±–ª–∏–∂–µ–Ω–∏—è: {len(closest)}")

# –ü–æ–ª—É—á–∏—Ç—å —Å–±–ª–∏–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
approaches = await service.get_by_asteroid_id(123)
print(f"–°–±–ª–∏–∂–µ–Ω–∏—è –¥–ª—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ 123: {len(approaches)}")

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
stats = await service.get_statistics()
print(f"–í—Å–µ–≥–æ —Å–±–ª–∏–∂–µ–Ω–∏–π: {stats['total_approaches']}")
print(f"–°—Ä–µ–¥–Ω–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ: {stats['average_distance_au']} –∞.–µ.")
```

### **–ü—Ä–∏–º–µ—Ä –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–±–ª–∏–∂–µ–Ω–∏–π:**
```python
from shared.transaction.uow import UnitOfWork
from shared.database.engine import AsyncSessionLocal
from datetime import datetime, timedelta

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
approaches_data = [
    {
        "asteroid_id": 1,
        "approach_time": datetime.now() + timedelta(days=30),
        "distance_au": 0.02,
        "distance_km": 0.02 * 149597870.7,
        "velocity_km_s": 15.5,
        "asteroid_designation": "433",
        "asteroid_name": "Eros",
        "data_source": "NASA CAD API"
    },
    {
        "asteroid_id": 2,
        "approach_time": datetime.now() + timedelta(days=60),
        "distance_au": 0.03,
        "distance_km": 0.03 * 149597870.7,
        "velocity_km_s": 12.0,
        "asteroid_designation": "495",
        "asteroid_name": "Eureka",
        "data_source": "NASA CAD API"
    }
]

async with UnitOfWork(AsyncSessionLocal) as uow:
    created_count = await uow.approach_repo.bulk_create_approaches(
        approaches_data, 
        calculation_batch_id="batch_2023_12_01"
    )
    print(f"–°–æ–∑–¥–∞–Ω–æ —Å–±–ª–∏–∂–µ–Ω–∏–π: {created_count}")
```

### **–ü—Ä–∏–º–µ—Ä —É–¥–∞–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π:**
```python
from shared.transaction.uow import UnitOfWork
from shared.database.engine import AsyncSessionLocal
from datetime import datetime, timedelta

async with UnitOfWork(AsyncSessionLocal) as uow:
    # –£–¥–∞–ª–∏—Ç—å —Å–±–ª–∏–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏–∑–æ—à–ª–∏ –±–æ–ª–µ–µ –≥–æ–¥–∞ –Ω–∞–∑–∞–¥
    cutoff_date = datetime.now() - timedelta(days=365)
    deleted_count = await uow.approach_repo.delete_old_approaches(cutoff_date)
    print(f"–£–¥–∞–ª–µ–Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å–±–ª–∏–∂–µ–Ω–∏–π: {deleted_count}")
```

---

**–°–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª:** [–ú–û–î–£–õ–¨ –£–ì–†–û–ó](threat_domain.md) - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞ —É–≥—Ä–æ–∑