### Общая архитектура

``` text
┌─────────────────────────────────────────────┐
│              NASA API Источники             │
├─────────────────────────────────────────────┤
│  ┌─────────────┐     ┌─────────────┐        │
│  │  SBDB API   │     │   CAD API   │        │
│  │ (Уровень 1) │     │ (Уровень 2) │        │
│  └──────┬──────┘     └──────┬──────┘        │
│         │                   │               │
│  ┌──────▼──────┐            │               │
│  │ Sentry API  │            │               │
│  │(Оценка рисков)           │               │
│  └─────────────┘            │               │
└─────────┼───────────────────┼───────────────┘
          │                   │
┌─────────▼───────────────────▼───────────────┐
│       Декораторы обработки ошибок           │
│            (error_handlers.py)              │
│  • Retry с экспоненциальной задержкой       │
│  • Обработка ошибок NASA API                │
│  • Rate limiting и таймауты                 │
│  • Логирование и валидация ответов          │
└─────────┬───────────────────┬───────────────┘
          │                   │
┌─────────▼───────────────────▼───────────────┐
│          Обработка и анализ данных          │
├─────────────────────────────────────────────┤
│  ┌─────────────┐     ┌─────────────┐        │
│  │   Парсинг   │     │  Валидация  │        │
│  │    данных   │     │    данных   │        │
│  └──────┬──────┘     └──────┬──────┘        │
└─────────┼───────────────────┼───────────────┘
          │                   │
┌─────────▼───────────────────▼───────────────┐
│         Хранение данных (PostgreSQL)        │
├─────────────────────────────────────────────┤
│  ┌───────────────────────────────────────┐  │
│  │       SQLAlchemy ORM Модели           │  │
│  │  • Астероиды                          │  │
│  │  • Сближения                          │  │
│  │  • Оценки угроз                       │  │
│  └───────────────────────────────────────┘  │
└─────────────────────────────────────────────┘
```

### Файловая структура 

``` text
asteroid-watch/
├── 🌐 api/                     # FastAPI маршруты
│   ├── __init__.py
│   └── dependencies.py         # Зависимости для DI
├── 📁 domains/                  # Доменные области
│   ├── __init__.py
│   ├── asteroid/                # Домен астероидов
│   │   ├── __init__.py
│   │   ├── models/              # Модели данных астероидов
│   │   │   ├── __init__.py
│   │   │   └── asteroid.py      # Модель астероидов
│   │   ├── schemas/             # Pydantic схемы астероидов
│   │   │   ├── __init__.py
│   │   │   └── asteroid_schema.py
│   │   ├── repositories/        # Репозитории астероидов 
│   │   │   ├── __init__.py
│   │   │   └── asteroid_repository.py
│   │   └── services/            # Сервисы астероидов
│   │       ├── __init__.py
│   │       ├── asteroid_service.py
│   │       └── transactional_asteroid_service.py
│   ├── approach/                # Домен сближений
│   │   ├── __init__.py
│   │   ├── models/              # Модели данных сближений
│   │   │   ├── __init__.py
│   │   │   └── close_approach.py # Модель сближений
│   │   ├── schemas/             # Pydantic схемы сближений
│   │   │   ├── __init__.py
│   │   │   └── approach_schema.py
│   │   ├── repositories/        # Репозитории сближений 
│   │   │   ├── __init__.py
│   │   │   └── approach_repository.py
│   │   └── services/            # Сервисы сближений
│   │       ├── __init__.py
│   │       └── approach_service.py
│   └── threat/                  # Домен угроз
│       ├── __init__.py
│       ├── models/              # Модели данных угроз
│       │   ├── __init__.py
│       │   └── threat_assessment.py # Модель оценки угроз
│       ├── schemas/             # Pydantic схемы угроз
│       │   ├── __init__.py
│       │   └── threat_schema.py
│       ├── repositories/        # Репозитории угроз 
│       │   ├── __init__.py
│       │   └── threat_repository.py
│       └── services/            # Сервисы угроз
│           ├── __init__.py
│           └── threat_service.py
│
├── 📁 shared/                   # Общие компоненты
│   ├── __init__.py
│   ├── config/                  # Конфигурация приложения
│   │   ├── __init__.py
│   │   ├── config_manager.py
│   │   └── database_loader.py
│   ├── database/                # Компоненты работы с базой данных
│   │   ├── __init__.py
│   │   ├── engine.py
│   │   └── get_db_config.py
│   ├── external_api/            # Клиенты внешних API
│   │   ├── __init__.py
│   │   ├── clients/             # Клиенты API
│   │   │   ├── __init__.py
│   │   │   ├── cad_api.py       # Клиент CAD API
│   │   │   ├── sbdb_api.py      # Клиент SBDB API
│   │   │   └── sentry_api.py    # Клиент Sentry API
│   │   └── wrappers/            # Обертки для работы с API
│   │       ├── __init__.py
│   │       ├── get_approaches.py
│   │       ├── get_data.py
│   │       └── get_threat.py
│   ├── infrastructure/          # Инфраструктурные компоненты
│   │   ├── __init__.py
│   │   ├── repositories/        # Базовые репозитории 
│   │   │   ├── __init__.py
│   │   │   └── base_repository.py
│   │   ├── schemas/             # Базовые схемы
│   │   │   ├── __init__.py
│   │   │   └── base_schema.py
│   │   └── services/            # Базовые сервисы
│   │       ├── __init__.py
│   │       ├── base_service.py
│   │       └── update_service.py
│   ├── models/                  # Базовые модели
│   │   ├── __init__.py
│   │   └── base.py
│   ├── resilience/              # Компоненты отказоустойчивости
│   │   ├── __init__.py
│   │   ├── bulkhead.py
│   │   ├── circuit_breaker.py
│   │   └── timeout.py
│   ├── testing/                 # Компоненты тестирования
│   │   ├── __init__.py
│   │   └── (файлы тестирования)
│   ├── transaction/             # Компоненты управления транзакциями
│   │   ├── __init__.py
│   │   ├── coordinator.py
│   │   └── uow.py              # Unit of Work реализация
│   └── utils/                   # Утилиты
│       ├── __init__.py
│       ├── error_handlers.py
│       ├── get_date.py
│       └── space_math.py
│
├── 📁 migrations/               # Миграции базы данных
│   ├── env.py
│   ├── script.py.mako
│   └── versions/                # Файлы миграций
│       └── (файлы миграций)
│
├── requirements.txt             # Зависимости Python
└── README.md                    # Основная документация
```

</content>