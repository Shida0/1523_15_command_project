# ü™® **–ú–û–î–£–õ–¨ –ê–°–¢–ï–†–û–ò–î–û–í**

## üìã **–ù–ê–ó–ù–ê–ß–ï–ù–ò–ï –ò –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–ò**

–î–æ–º–µ–Ω –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ (`domains.asteroid`) –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∞—Å—Ç–µ—Ä–æ–∏–¥–∞—Ö
- –û–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ NASA SBDB API
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –¥—Ä—É–≥–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ (—Å–±–ª–∏–∂–µ–Ω–∏—è, —É–≥—Ä–æ–∑—ã)

## üß± **–ú–û–î–ï–õ–¨ ASTEROIDMODEL**

### **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/asteroid/models/asteroid.py`

### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ú–æ–¥–µ–ª—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö –∞—Å—Ç–µ—Ä–æ–∏–¥–∞—Ö (PHA), —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–±–ª–∏—Ü–µ `asteroid_models`.

### **–ê—Ç—Ä–∏–±—É—Ç—ã –º–æ–¥–µ–ª–∏:**

| –ê—Ç—Ä–∏–±—É—Ç | –¢–∏–ø | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|-----|------------|
| `id` | `int` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç) |
| `created_at` | `datetime` | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ |
| `updated_at` | `datetime` | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| `designation` | `str` | –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ NASA (–Ω–∞–ø—Ä–∏–º–µ—Ä, '99942', '2025 XN4') |
| `name` | `Optional[str]` | –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'Apophis') |
| `perihelion_au` | `Optional[float]` | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–∏–≥–µ–ª–∏—è –≤ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö |
| `aphelion_au` | `Optional[float]` | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∞—Ñ–µ–ª–∏—è –≤ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö |
| `earth_moid_au` | `Optional[float]` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –æ—Ä–±–∏—Ç —Å –ó–µ–º–ª–µ–π (MOID) |
| `absolute_magnitude` | `float` | –ê–±—Å–æ–ª—é—Ç–Ω–∞—è –∑–≤–µ–∑–¥–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ (H) |
| `estimated_diameter_km` | `float` | –†–∞—Å—á–µ—Ç–Ω—ã–π –¥–∏–∞–º–µ—Ç—Ä –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö |
| `accurate_diameter` | `bool` | –î–∏–∞–º–µ—Ç—Ä —Ç–æ—á–Ω—ã–π –∏–ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –∞–ª—å–±–µ–¥–æ |
| `albedo` | `float` | –ê–ª—å–±–µ–¥–æ (–æ—Ç—Ä–∞–∂–∞—Ç–µ–ª—å–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å), –µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ |
| `diameter_source` | `str` | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –æ –¥–∏–∞–º–µ—Ç—Ä–µ: 'measured', 'computed', 'calculated' |
| `orbit_id` | `Optional[str]` | ID –æ—Ä–±–∏—Ç—ã –∏–∑ NASA SBDB |
| `orbit_class` | `Optional[str]` | –ö–ª–∞—Å—Å –æ—Ä–±–∏—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'Apollo', 'Aten', 'Amor') |

### **–û—Ç–Ω–æ—à–µ–Ω–∏—è:**
- `close_approaches`: –°–≤—è–∑—å –æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º —Å `CloseApproachModel`
- `threat_assessment`: –°–≤—è–∑—å –æ–¥–∏–Ω –∫ –æ–¥–Ω–æ–º—É —Å `ThreatAssessmentModel`

### **–ú–µ—Ç–æ–¥—ã –º–æ–¥–µ–ª–∏:**
- `__init__(**kwargs)` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –º–æ–¥–µ–ª–∏ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö
- `__repr__()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞

## üìê **–°–•–ï–ú–´ PYDANTIC**

### **AsteroidBase**
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/asteroid/schemas/asteroid_schema.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ —Å –æ–±—â–∏–º–∏ –ø–æ–ª—è–º–∏.

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `id` (int): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `created_at` (datetime): –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` (datetime): –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `designation` (str): –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ NASA
- `name` (Optional[str]): –ò–º—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- `perihelion_au` (Optional[float]): –ü–µ—Ä–∏–≥–µ–ª–∏–π –≤ –∞.–µ.
- `aphelion_au` (Optional[float]): –ê—Ñ–µ–ª–∏–π –≤ –∞.–µ.
- `earth_moid_au` (Optional[float]): MOID –ó–µ–º–ª–∏ –≤ –∞.–µ.
- `absolute_magnitude` (float): –ê–±—Å–æ–ª—é—Ç–Ω–∞—è –∑–≤–µ–∑–¥–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞
- `estimated_diameter_km` (float): –û—Ü–µ–Ω–æ—á–Ω—ã–π –¥–∏–∞–º–µ—Ç—Ä –≤ –∫–º
- `accurate_diameter` (bool): –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–∏–∞–º–µ—Ç—Ä —Ç–æ—á–Ω—ã–º
- `albedo` (float): –ê–ª—å–±–µ–¥–æ (0.0-1.0)
- `diameter_source` (str): –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –æ –¥–∏–∞–º–µ—Ç—Ä–µ
- `orbit_id` (Optional[str]): ID –æ—Ä–±–∏—Ç—ã
- `orbit_class` (Optional[str]): –ö–ª–∞—Å—Å –æ—Ä–±–∏—Ç—ã

### **AsteroidCreate**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ö–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞.

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- –í—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ `AsteroidBase` –ø–ª—é—Å:
- `accurate_diameter` (bool): –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é False
- `albedo` (float): –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.15 —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ (0.0-1.0)
- `orbit_id` (Optional[str]): –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é None
- `orbit_class` (Optional[str]): –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é None
- `diameter_source` (str): –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é "calculated"

### **AsteroidResponse**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ö–µ–º–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ API —Å –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–º.

**–ê—Ç—Ä–∏–±—É—Ç—ã:** –í—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ `AsteroidBase`

## üè™ **–†–ï–ü–û–ó–ò–¢–û–†–ò–ô ASTEROIDREPOSITORY**

### **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/asteroid/repositories/asteroid_repository.py`

### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∞—Å—Ç–µ—Ä–æ–∏–¥–∞–º–∏, –Ω–∞—Å–ª–µ–¥—É–µ—Ç `BaseRepository` –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `AsteroidModel`.

### **–ú–µ—Ç–æ–¥—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**

#### **`get_by_designation(designation: str) -> Optional[AsteroidModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—Ö–æ–¥–∏—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥ –ø–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—é NASA
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `designation` (str) - –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ NASA
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Optional[AsteroidModel]` - –∞—Å—Ç–µ—Ä–æ–∏–¥ –∏–ª–∏ None
- **–ü—Ä–∏–º–µ—Ä:**
```python
asteroid = await repo.get_by_designation("433")
```

#### **`search_by_name_or_designation(search_term: str, skip: int = 0, limit: int = 50) -> List[AsteroidModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò—â–µ—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—é
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `search_term` (str), `skip` (int), `limit` (int)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[AsteroidModel]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤

#### **`get_asteroids_by_diameter_range(min_diameter: Optional[float] = None, max_diameter: Optional[float] = None, skip: int = 0, limit: int = 100) -> List[AsteroidModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä—É–µ—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥—ã –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∏–∞–º–µ—Ç—Ä–æ–≤
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `min_diameter`, `max_diameter`, `skip`, `limit`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[AsteroidModel]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤

#### **`get_asteroids_by_earth_moid(max_moid: float, skip: int = 0, limit: int = 100) -> List[AsteroidModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥—ã —Å MOID –º–µ–Ω—å—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `max_moid`, `skip`, `limit`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[AsteroidModel]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤

#### **`get_asteroids_with_accurate_diameter(skip: int = 0, limit: int = 100) -> List[AsteroidModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥—ã —Å —Ç–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ –¥–∏–∞–º–µ—Ç—Ä–µ
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `skip`, `limit`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[AsteroidModel]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤

#### **`get_asteroids_by_orbit_class(orbit_class: str, skip: int = 0, limit: int = 100) -> List[AsteroidModel]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥—ã –ø–æ –∫–ª–∞—Å—Å—É –æ—Ä–±–∏—Ç—ã
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `orbit_class`, `skip`, `limit`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[AsteroidModel]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤

#### **`get_statistics() -> Dict[str, Any]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞–º
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Dict[str, Any]` - —Å–ª–æ–≤–∞—Ä—å —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

#### **`bulk_create_asteroids(asteroids_data: List[Dict[str, Any]]) -> Tuple[int, int]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å –∫–æ–º–º–∏—Ç–æ–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `asteroids_data` - —Å–ø–∏—Å–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Tuple[int, int]` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö

## üõ†Ô∏è **–°–ï–†–í–ò–°–´ ASTEROIDSERVICE**

### **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/asteroid/services/asteroid_service.py`

### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Å—Ç–µ—Ä–æ–∏–¥–∞–º–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Å—Ç–µ—Ä–æ–∏–¥–∞–º–∏.

### **–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `session_factory`: –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π SQLAlchemy

### **–ú–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞:**

#### **`get_by_designation(designation: str) -> Optional[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –ø–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—é NASA
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `designation` (str) - –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –≤ —Å–∏—Å—Ç–µ–º–µ NASA
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Optional[Dict[str, Any]]` - —Å–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–± –∞—Å—Ç–µ—Ä–æ–∏–¥–µ –∏–ª–∏ None
- **–ü—Ä–∏–º–µ—Ä:**
```python
asteroid = await service.get_by_designation("433")
if asteroid:
    print(f"–ù–∞–π–¥–µ–Ω –∞—Å—Ç–µ—Ä–æ–∏–¥: {asteroid['name']}")
```

#### **`get_by_moid(max_moid: float = 0.05) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å MOID (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –æ—Ä–±–∏—Ç) –º–µ–Ω—å—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `max_moid` (float) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ MOID –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.05 –∞.–µ.)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å MOID –º–µ–Ω—å—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

#### **`get_by_orbit_class(orbit_class: str) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ –ø–æ –∫–ª–∞—Å—Å—É –æ—Ä–±–∏—Ç—ã
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `orbit_class` (str) - –∫–ª–∞—Å—Å –æ—Ä–±–∏—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Apollo", "Aten", "Amor")
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –æ—Ä–±–∏—Ç—ã

#### **`get_with_accurate_diameter() -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å —Ç–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ –¥–∏–∞–º–µ—Ç—Ä–µ
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ —Å —Ç–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ –¥–∏–∞–º–µ—Ç—Ä–µ

#### **`get_statistics() -> Dict[str, Any]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞–º
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Dict[str, Any]` - —Å–ª–æ–≤–∞—Ä—å —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ–± –∞—Å—Ç–µ—Ä–æ–∏–¥–∞—Ö

#### **`_model_to_dict(model_instance) -> Dict[str, Any]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –º–æ–¥–µ–ª–∏ –≤ —Å–ª–æ–≤–∞—Ä—å

## üîÑ **–¢–†–ê–ù–ó–ê–ö–¶–ò–û–ù–ù–´–ô –°–ï–†–í–ò–° TRANSACTIONALASTEROIDSERVICE**

### **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `domains/asteroid/services/transactional_asteroid_service.py`

### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–°–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Å—Ç–µ—Ä–æ–∏–¥–∞–º–∏ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏.

### **–ú–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞:**

#### **`create_asteroid(asteroid_data: Dict[str, Any]) -> Optional[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞—Å—Ç–µ—Ä–æ–∏–¥ –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `asteroid_data` - –¥–∞–Ω–Ω—ã–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Optional[Dict[str, Any]]` - —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞—Å—Ç–µ—Ä–æ–∏–¥ –∏–ª–∏ None

#### **`update_asteroid(asteroid_id: int, update_data: Dict[str, Any]) -> Optional[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –∞—Å—Ç–µ—Ä–æ–∏–¥ –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `asteroid_id`, `update_data` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Optional[Dict[str, Any]]` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∞—Å—Ç–µ—Ä–æ–∏–¥ –∏–ª–∏ None

#### **`delete_asteroid(asteroid_id: int) -> bool`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∞—Å—Ç–µ—Ä–æ–∏–¥ –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `asteroid_id` - ID –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `bool` - —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è

#### **`get_asteroid_by_id(asteroid_id: int) -> Optional[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∞—Å—Ç–µ—Ä–æ–∏–¥ –ø–æ ID –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `asteroid_id` - ID –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Optional[Dict[str, Any]]` - –∞—Å—Ç–µ—Ä–æ–∏–¥ –∏–ª–∏ None

#### **`get_asteroid_by_designation(designation: str) -> Optional[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∞—Å—Ç–µ—Ä–æ–∏–¥ –ø–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—é –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `designation` - –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Optional[Dict[str, Any]]` - –∞—Å—Ç–µ—Ä–æ–∏–¥ –∏–ª–∏ None

#### **`get_all_asteroids(skip: int = 0, limit: int = 100) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞—Å—Ç–µ—Ä–æ–∏–¥—ã –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `skip`, `limit`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Å–ø–∏—Å–æ–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤

#### **`complex_asteroid_operation(asteroids_data: List[Dict[str, Any]]) -> List[Dict[str, Any]]`**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–æ–∂–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é, –≤–∫–ª—é—á–∞—é—â—É—é –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `asteroids_data` - —Å–ø–∏—Å–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `List[Dict[str, Any]]` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–∏

## üß™ **–ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø**

### **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**
```python
from shared.transaction.uow import UnitOfWork
from shared.database.engine import AsyncSessionLocal

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ —Ä–∞–º–∫–∞—Ö Unit of Work
async with UnitOfWork(AsyncSessionLocal) as uow:
    # –ü–æ–ª—É—á–∏—Ç—å –∞—Å—Ç–µ—Ä–æ–∏–¥ –ø–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—é
    asteroid = await uow.asteroid_repo.get_by_designation("433")
    
    # –ù–∞–π—Ç–∏ –∞—Å—Ç–µ—Ä–æ–∏–¥—ã —Å MOID –º–µ–Ω—å—à–µ 0.05 –∞.–µ.
    close_asteroids = await uow.asteroid_repo.get_asteroids_by_earth_moid(0.05)
    
    # –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–∞–º
    stats = await uow.asteroid_repo.get_statistics()
    
    print(f"–í—Å–µ–≥–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤: {stats['total_asteroids']}")
    print(f"–°—Ä–µ–¥–Ω–∏–π –¥–∏–∞–º–µ—Ç—Ä: {stats['average_diameter_km']} –∫–º")
```

### **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞:**
```python
from domains.asteroid.services.asteroid_service import AsteroidService
from shared.database.engine import AsyncSessionLocal

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
service = AsteroidService(AsyncSessionLocal)

# –ü–æ–ª—É—á–∏—Ç—å –∞—Å—Ç–µ—Ä–æ–∏–¥ –ø–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—é
asteroid = await service.get_by_designation("433")
if asteroid:
    print(f"–ù–∞–π–¥–µ–Ω –∞—Å—Ç–µ—Ä–æ–∏–¥: {asteroid['name']}")

# –ü–æ–ª—É—á–∏—Ç—å –∞—Å—Ç–µ—Ä–æ–∏–¥—ã —Å –≤—ã—Å–æ–∫–∏–º —Ä–∏—Å–∫–æ–º (MOID < 0.02 –∞.–µ.)
risky_asteroids = await service.get_by_moid(0.02)
print(f"–ù–∞–π–¥–µ–Ω–æ {len(risky_asteroids)} –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤")

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
stats = await service.get_statistics()
print(f"–í—Å–µ–≥–æ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤: {stats['total_asteroids']}")
```

### **–ü—Ä–∏–º–µ—Ä –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è:**
```python
from shared.transaction.uow import UnitOfWork
from shared.database.engine import AsyncSessionLocal

# –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤
asteroids_data = [
    {
        "designation": "2023_test1",
        "name": "Test Asteroid 1",
        "absolute_magnitude": 20.5,
        "estimated_diameter_km": 0.1,
        "albedo": 0.15,
        "accurate_diameter": False,
        "diameter_source": "calculated"
    },
    {
        "designation": "2023_test2", 
        "name": "Test Asteroid 2",
        "absolute_magnitude": 18.0,
        "estimated_diameter_km": 0.5,
        "albedo": 0.2,
        "accurate_diameter": True,
        "diameter_source": "measured"
    }
]

async with UnitOfWork(AsyncSessionLocal) as uow:
    created, updated = await uow.asteroid_repo.bulk_create_asteroids(asteroids_data)
    print(f"–°–æ–∑–¥–∞–Ω–æ: {created}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated}")
```

---

**–°–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª:** [–ú–û–î–£–õ–¨ –°–ë–õ–ò–ñ–ï–ù–ò–ô](approach_domain.md) - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞ —Å–±–ª–∏–∂–µ–Ω–∏–π