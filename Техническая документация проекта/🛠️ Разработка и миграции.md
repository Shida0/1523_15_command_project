
### Установка для разработки

```bash

# Установка зависимостей для разработки
pip install -r requirements.txt

# Установка pre-commit хуков
pre-commit install

# Запуск тестов
pytest tests/ -v

# Проверка покрытия тестами
pytest --cov=./ --cov-report=html
```

### Миграции базы данных

``` bash
# Создание новой миграции
alembic revision --autogenerate -m "Описание изменений"

# Применение миграций
alembic upgrade head

# Откат миграции
alembic downgrade -1

# Просмотр истории миграций
alembic history
```

### Примеры использования API

#### Пример 1: Полный цикл получения данных

```python
from utils.get_data import NASASBDBClient
from utils.cad_api import CombinedCADClient
from datetime import datetime, timedelta

# Уровень 1: Получение астероидов
sbdb_client = NASASBDBClient()
asteroids = sbdb_client.get_asteroids(limit=50)

# Уровень 2: Получение сближений
cad_client = CombinedCADClient()
approaches = cad_client.get_close_approaches(
    asteroid_ids=designations,
    start_date=datetime.now(),
    end_date=datetime.now() + timedelta(days=3650),
    max_distance_au=0.05
)

print(f"Найдено {len(approaches)} астероидов со сближениями")
```

#### Пример 2: Работа с базой данных

```python

from models.engine import AsyncSessionLocal
from controllers.asteroid_controller import AsteroidController
from controllers.approach_controller import ApproachController

async def analyze_asteroids():
    async with AsyncSessionLocal() as session:
        # Получить контроллеры
        asteroid_ctrl = AsteroidController()
        approach_ctrl = ApproachController()
        
        # Получить статистику
        stats = await asteroid_ctrl.get_statistics(session)
        print(f"Всего астероидов: {stats['total_asteroids']}")
        
        # Получить ближайшие сближения
        closest = await approach_ctrl.get_closest_approaches(session, limit=5)
        for approach in closest:
            print(f"{approach.approach_time}: {approach.distance_au} а.е.")
```

